<script type="text/javascript">

// replace cmd keyboard shortcut w/ control on non-Mac platforms
const kPlatformMac = typeof navigator !== 'undefined' ? /Mac/.test(navigator.platform) : false;
if (!kPlatformMac) {
   var kbds = document.querySelectorAll("kbd")
   kbds.forEach(function(kbd) {
      kbd.innerHTML = kbd.innerHTML.replace(/⌘/g, '⌃');
   });
}

// tweak headings in pymd
document.querySelectorAll(".pymd span.co").forEach(el => {
   if (!el.innerText.startsWith("#|")) {
      el.style.fontWeight = 1000;
   }
});

// Copy helper for module path buttons (quarto-web-main clipboard pattern).
document.addEventListener("click", async (event) => {
  const btn = event.target.closest(".copy-path-btn");
  if (!btn) return;
  const value = btn.getAttribute("data-copy") || "";
  if (!value) return;
  try {
    await navigator.clipboard.writeText(value);
    btn.classList.add("copy-path-btn-checked");
    const icon = btn.querySelector("i.bi");
    if (icon) {
      icon.classList.remove("bi-clipboard");
      icon.classList.add("bi-clipboard-check");
    }
    let tooltip;
    if (window.bootstrap) {
      btn.setAttribute("data-bs-toggle", "tooltip");
      btn.setAttribute("data-bs-placement", "left");
      btn.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(btn, {
        trigger: "manual",
        customClass: "code-copy-button-tooltip",
        offset: [0, -8]
      });
      tooltip.show();
    }
    setTimeout(() => {
      if (tooltip) {
        tooltip.hide();
        btn.removeAttribute("data-bs-title");
        btn.removeAttribute("data-bs-toggle");
        btn.removeAttribute("data-bs-placement");
      }
      btn.classList.remove("copy-path-btn-checked");
      if (icon) {
        icon.classList.remove("bi-clipboard-check");
        icon.classList.add("bi-clipboard");
      }
    }, 1000);
  } catch (e) {
    // silent fallback
  }
});

</script>
